<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>汽车抽取模拟器</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #1a1a1a;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 800px;
            position: relative;
            overflow: hidden;
            background: #2a2a2a;
            border-radius: 8px;
            padding: 20px 0;
            margin: 20px 0;
            height: 180px;
        }


        .selector {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 100%;
            background: #ffd700;
            z-index: 2;
            pointer-events: none; /* 确保选择器不会干扰点击事件 */
        }

        .items-container {
            display: flex;
            position: relative;
            padding: 0 5px;
            will-change: transform; /* 优化性能 */
        }

        .item {
            flex: 0 0 200px;
            height: 140px;
            margin: 0 5px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        .item.covert {
            border: 3px solid #EB4B4B;
            box-shadow: 0 0 10px rgba(235, 75, 75, 0.3);
        }

        .item.classified {
            border: 3px solid #D32CE6;
            box-shadow: 0 0 10px rgba(211, 44, 230, 0.3);
        }

        .item.restricted {
            border: 3px solid #8847FF;
            box-shadow: 0 0 10px rgba(136, 71, 255, 0.3);
        }

        .item.milspec {
            border: 3px solid #4B69FF;
            box-shadow: 0 0 10px rgba(75, 105, 255, 0.3);
        }

        .item.industrial {
            border: 3px solid #B0C3D9;
            box-shadow: 0 0 10px rgba(176, 195, 217, 0.3);
        }

        .item img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .spin-button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
            transition: background 0.3s;
        }

        .spin-button:hover {
            background: #45a049;
        }

        .spin-button:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }

        .result-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .result-content {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            max-width: 90%;
            width: 400px;
        }

        .result-image {
            width: 300px;
            height: 300px;
            object-fit: contain;
            margin: 20px 0;
        }

        .continue-button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }

        .history-container {
            width: 100%;
            max-width: 800px;
            margin: 20px 0;
            padding: 20px;
            background: #2a2a2a;
            border-radius: 8px;
        }

        .history-title {
            color: white;
            font-size: 20px;
            margin-bottom: 15px;
            text-align: center;
        }

        .history-section {
            margin-bottom: 15px;
        }

        .history-section-title {
            color: white;
            font-size: 16px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .history-items {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .history-item {
            width: 80px;
            height: 80px;
            border-radius: 4px;
            overflow: hidden;
            position: relative;
        }

        .history-item img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .history-covert {
            color: #EB4B4B;
        }

        .history-classified {
            color: #D32CE6;
        }

        .history-restricted {
            color: #8847FF;
        }

        .history-milspec {
            color: #4B69FF;
        }

        .history-industrial {
            color: #B0C3D9;
        }

        .history-item.covert {
            border: 2px solid #EB4B4B;
        }

        .history-item.classified {
            border: 2px solid #D32CE6;
        }

        .history-item.restricted {
            border: 2px solid #8847FF;
        }

        .history-item.milspec {
            border: 2px solid #4B69FF;
        }

        .history-item.industrial {
            border: 2px solid #B0C3D9;
        }

        /* 在 style 标签中添加或修改这些样式 */
.result-content {
    background: #2a2a2a;
    padding: 20px;
    border-radius: 8px;
    text-align: center;
    max-width: 90%;
    width: 400px;
}

.result-image-container {
    width: 300px;
    height: 300px;
    margin: 20px auto;
    border-radius: 8px;
    padding: 3px; /* 为边框留出空间 */
    transition: all 0.3s ease;
}

/* 为不同类型添加边框样式 */
.result-image-container.covert {
    border: 3px solid #EB4B4B;
    box-shadow: 0 0 20px rgba(235, 75, 75, 0.3);
}

.result-image-container.classified {
    border: 3px solid #D32CE6;
    box-shadow: 0 0 20px rgba(211, 44, 230, 0.3);
}

.result-image-container.restricted {
    border: 3px solid #8847FF;
    box-shadow: 0 0 20px rgba(136, 71, 255, 0.3);
}

.result-image-container.milspec {
    border: 3px solid #4B69FF;
    box-shadow: 0 0 20px rgba(75, 105, 255, 0.3);
}

.result-image-container.industrial {
    border: 3px solid #B0C3D9;
    box-shadow: 0 0 20px rgba(176, 195, 217, 0.3);
}

.result-image {
    width: 100%;
    height: 100%;
    object-fit: contain;
}
.login-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .login-content {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 8px;
            width: 300px;
            text-align: center;
        }

        .login-input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: none;
            border-radius: 4px;
            background: #1a1a1a;
            color: white;
        }

        .login-button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }

        .leaderboard-button {
            background: #2196F3;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
            margin-left: 10px;
        }

        .leaderboard-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .leaderboard-content {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 8px;
            width: 80%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
            color: white;
        }

        .leaderboard-table th,
        .leaderboard-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #444;
        }

        .leaderboard-table th {
            background: #1a1a1a;
        }

        .user-info {
            color: white;
            text-align: center;
            margin-bottom: 20px;
        }

        .close-button {
            background: #ff4444;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }
        .leaderboard-table th {
        padding: 10px;
        text-align: center;
        background: #1a1a1a;
    }

    .leaderboard-table td {
        text-align: center;
        padding: 8px;
    }

    .stat-count {
        font-weight: bold;
    }
    .leaderboard-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: #1a1a1a;
        display: none;
        z-index: 2000;
        overflow: auto;
        padding: 20px;
    }

    .leaderboard-content {
        width: 100%;
        max-width: none;
        height: 100%;
        background: transparent;
        position: relative;
    }

    .leaderboard-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
    }

    .leaderboard-table th,
    .leaderboard-table td {
        padding: 15px;
        text-align: center;
        border: 1px solid #333;
    }

    .leaderboard-table th {
        background: #2a2a2a;
        position: sticky;
        top: 0;
        z-index: 1;
    }

    /* 关闭按钮样式 */
    .close-button {
        position: absolute;
        top: 10px;
        right: 10px;
        background: #ff4444;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        transition: background-color 0.3s;
    }

    .close-button:hover {
        background: #ff2222;
    }

    /* 标题样式 */
    .leaderboard-title {
        color: white;
        text-align: center;
        font-size: 24px;
        margin: 10px 0;
    }

    /* 表格内容hover效果 */
    .leaderboard-table tr:hover td {
        background-color: #2a2a2a;
    }

    /* 前三名样式 */
    .leaderboard-table tr:nth-child(1) td {
        background-color: rgba(255, 215, 0, 0.1);
    }
    
    .leaderboard-table tr:nth-child(2) td {
        background-color: rgba(192, 192, 192, 0.1);
    }
    
    .leaderboard-table tr:nth-child(3) td {
        background-color: rgba(205, 127, 50, 0.1);
    }

    /* 自定义滚动条样式 */
    .leaderboard-modal::-webkit-scrollbar {
        width: 10px;
    }

    .leaderboard-modal::-webkit-scrollbar-track {
        background: #1a1a1a;
    }

    .leaderboard-modal::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 5px;
    }

    .leaderboard-modal::-webkit-scrollbar-thumb:hover {
        background: #555;
    }

    </style>
</head>
<body>
        <!-- 登录模态框 -->
        <div class="login-modal" id="loginModal">
            <div class="login-content">
                <h2 style="color: white;">请输入用户名</h2>
                <input type="text" id="usernameInput" class="login-input" placeholder="输入用户名">
                <button class="login-button" id="loginButton">登录</button>
            </div>
        </div>
    
        <!-- 用户信息显示 -->
        <div class="user-info" id="userInfo"></div>
        <div class="container">
            <div class="selector"></div>
            <div class="items-container" id="itemsContainer"></div>
        </div>
        <div style="display: flex; justify-content: center; gap: 10px;">
            <button class="spin-button" id="spinButton">拼手气!!!</button>
            <button class="leaderboard-button" id="leaderboardButton">排行榜</button>
        </div>
        <!-- 排行榜模态框 -->
        <div class="leaderboard-modal" id="leaderboardModal">
            <div class="leaderboard-content">
                <button class="close-button" id="closeLeaderboard">×</button>
                <h2 class="leaderboard-title">排行榜</h2>
                <table class="leaderboard-table">
                    <thead>
                        <tr>
                            <th>排名</th>
                            <th>用户名</th>
                            <th class="history-covert">红色</th>
                            <th class="history-classified">粉色</th>
                            <th class="history-restricted">紫色</th>
                            <th class="history-milspec">蓝色</th>
                            <th class="history-industrial">浅蓝</th>
                            <th>总计</th>
                        </tr>
                    </thead>
                    <tbody id="leaderboardBody">
                    </tbody>
                </table>
            </div>
        </div>

    <div class="history-container">
        <div class="history-title">抽取历史</div>
        <div class="history-section">
            <div class="history-section-title history-covert">Covert（红色）</div>
            <div class="history-items" id="historyCovert"></div>
        </div>
        <div class="history-section">
            <div class="history-section-title history-classified">Classified（粉色）</div>
            <div class="history-items" id="historyClassified"></div>
        </div>
        <div class="history-section">
            <div class="history-section-title history-restricted">Restricted（紫色）</div>
            <div class="history-items" id="historyRestricted"></div>
        </div>
        <div class="history-section">
            <div class="history-section-title history-milspec">Mil-spec（蓝色）</div>
            <div class="history-items" id="historyMilspec"></div>
        </div>
        <div class="history-section">
            <div class="history-section-title history-industrial">Industrial（浅蓝）</div>
            <div class="history-items" id="historyIndustrial"></div>
        </div>
    </div>

    <div class="result-modal" id="resultModal">
        <div class="result-content">
            <div class="result-image-container" id="resultImageContainer">
                <img class="result-image" id="resultImage" src="" alt="获得的物品">
            </div>
            <button class="continue-button" id="continueButton">继续</button>
        </div>
    </div>

    <script>
        // 预加载音效
        const rollSound = new Audio('./music/Roll.mp3');
        const dropSounds = {
            covert: new Audio('./music/drop5.mp3'),
            classified: new Audio('./music/drop4.mp3'),
            restricted: new Audio('./music/drop3.mp3'),
            milspec: new Audio('./music/drop2.mp3'),
            industrial: new Audio('./music/drop1.mp3')
        };

        // 配置
        const config = {
            covert: {
                count: 21,
                probability: 0.01,
                path: '/covert/pic'
            },
            classified: {
                count: 34,
                probability: 0.1,
                path: '/classified/pic'
            },
            restricted: {
                count: 36,
                probability: 0.19,
                path: '/restricted/pic'
            },
            milspec: {
                count: 78,
                probability: 0.3,
                path: '/milspec/pic'
            },
            industrial: {
                count: 162,
                probability: 0.4,
                path: '/industrial/pic'
            }
        };

        let history = {
            covert: [],
            classified: [],
            restricted: [],
            milspec: [],
            industrial: []
        };

        const itemsContainer = document.getElementById('itemsContainer');
        const spinButton = document.getElementById('spinButton');
        const resultModal = document.getElementById('resultModal');
        const resultImage = document.getElementById('resultImage');
        const continueButton = document.getElementById('continueButton');
        let isSpinning = false;
        let rollSoundInterval;

        function loadHistory() {
            const savedHistory = localStorage.getItem('carHistory');
            if (savedHistory) {
                history = JSON.parse(savedHistory);
                history.covert = history.covert.slice(-5);
                history.classified = history.classified.slice(-5);
                history.restricted = history.restricted.slice(-5);
                history.milspec = history.milspec.slice(-5);
                history.industrial = history.industrial.slice(-5);
                updateHistoryDisplay();
            }
        }

        function saveHistory() {
            localStorage.setItem('carHistory', JSON.stringify(history));
        }

        function updateHistoryDisplay() {
            for (const type in history) {
                const container = document.getElementById(`history${type.charAt(0).toUpperCase() + type.slice(1)}`);
                container.innerHTML = '';
                history[type].forEach(item => {
                    const historyItem = document.createElement('div');
                    historyItem.className = `history-item ${type}`;
                    const img = document.createElement('img');
                    img.src = item.imagePath;
                    img.alt = `${type} car`;
                    historyItem.appendChild(img);
                    container.appendChild(historyItem);
                });
            }
        }

        function addToHistory(item) {
            history[item.type].push(item);
            saveHistory();
            updateHistoryDisplay();
        }

        function determineType() {
            const rand = Math.random();
            let cumulative = 0;
            for (const [type, data] of Object.entries(config)) {
                cumulative += data.probability;
                if (rand <= cumulative) {
                    return type;
                }
            }
            return 'industrial';
        }

        function generateItems() {
            let items = [];
            for (let i = 0; i < 31; i++) {
                const type = determineType();
                const imageNumber = Math.floor(Math.random() * config[type].count) + 1;
                items.push({
                    type: type,
                    imagePath: `${config[type].path}${imageNumber}.png`
                });
            }
            return items;
        }

        function createItems() {
            itemsContainer.innerHTML = '';
            const items = generateItems();
            
            // 确保items数组长度足够
            while (items.length < 31) { // 确保有足够的项目
                const type = determineType();
                const imageNumber = Math.floor(Math.random() * config[type].count) + 1;
                items.push({
                    type: type,
                    imagePath: `${config[type].path}${imageNumber}.png`
                });
            }
            
            items.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = `item ${item.type}`;
                const img = document.createElement('img');
                img.src = item.imagePath;
                img.alt = `${item.type} car`;
                itemElement.appendChild(img);
                itemsContainer.appendChild(itemElement);
            });
            
            return items;
        }

        function playRollSound() {
            rollSound.currentTime = 0;
            rollSound.play();
        }

        // 修改 showResult 函数
        function showResult(selectedItem) {
            const resultImageContainer = document.getElementById('resultImageContainer');
            const resultImage = document.getElementById('resultImage');
            
            // 移除所有可能的类名
            resultImageContainer.classList.remove('covert', 'classified', 'restricted', 'milspec', 'industrial');
            // 添加对应类型的类名
            resultImageContainer.classList.add(selectedItem.type);
            
            // 播放对应的音效
            dropSounds[selectedItem.type].play();
            
            // 显示图片和弹窗
            resultImage.src = selectedItem.imagePath;
            resultModal.style.display = 'flex';
        }


        // 替换这些函数

let currentSpeed = 50; // 初始速度
let isPlayingRoll = false; // 控制音效播放状态

function playRollSoundLoop() {
    if (!isPlayingRoll) return;
    
    rollSound.currentTime = 0;
    rollSound.play();
    
    // 当前音效播放结束后，如果还在滚动状态就继续播放
    setTimeout(() => {
        if (isPlayingRoll) {
            playRollSoundLoop();
        }
    }, currentSpeed);
}

function startRollSound() {
    isPlayingRoll = true;
    playRollSoundLoop();
}

function stopRollSound() {
    isPlayingRoll = false;
}

function updateRollSpeed(progress) {
    // progress 从 0 到 1
    currentSpeed = 50 + (400 * progress); // 从50ms到450ms
}

function spin() {
    if (isSpinning) return;

    itemsContainer.style.transition = 'none';
    itemsContainer.style.transform = 'translateX(0)';

    const items = createItems();
    isSpinning = true;
    spinButton.disabled = true;
    currentSpeed = 50; // 重置速度

    // 开始播放滚动音效
    startRollSound();

    setTimeout(() => {
        const itemWidth = 210;
        const selectedIndex = 15;
        const baseOffset = itemWidth * selectedIndex;
        const randomOffset = Math.random() * 20 - 10;
        const finalOffset = baseOffset + randomOffset;

        // 设置CSS过渡效果
        itemsContainer.style.transition = 'transform 5s cubic-bezier(0.15, 0.85, 0.35, 1)';
        itemsContainer.style.transform = `translateX(-${finalOffset}px)`;

        const startTime = performance.now();
        const duration = 5000;

        function animate(currentTime) {
            const elapsed = currentTime - startTime;
            const progress = Math.min(elapsed / duration, 1);

            // 更新滚动音效速度
            
            updateRollSpeed(progress);
            if (progress < 1) {
                if(progress>0.7){
                    stopRollSound();
                }
                requestAnimationFrame(animate);
            } else {
                 // 停止滚动音效
                isSpinning = false;
                stopRollSound();
                const selectedItem = items[selectedIndex];
                if (!selectedItem) {
                    console.error('Selected item not found, index:', selectedIndex);
                    return;
                }
                
                // 显示结果
                setTimeout(() => {
                    addToHistory(selectedItem);
                    showResult(selectedItem);
                }, 100);
            }
        }

        requestAnimationFrame(animate);
    }, 50);
}

// 在页面卸载时停止音效
window.addEventListener('beforeunload', () => {
    stopRollSound();
});

        function clearHistory() {
            history = {
                covert: [],
                classified: [],
                restricted: [],
                milspec: [],
                industrial: []
            };
            saveHistory();
            updateHistoryDisplay();
        }

        continueButton.addEventListener('click', () => {
            resultModal.style.display = 'none';
            spinButton.disabled = false;
        });

        spinButton.addEventListener('click', spin);

        // 初始化
        loadHistory();
        createItems();


        // 添加新的变量
        let currentUser = null;
        const loginModal = document.getElementById('loginModal');
        const usernameInput = document.getElementById('usernameInput');
        const loginButton = document.getElementById('loginButton');
        const userInfo = document.getElementById('userInfo');
        const leaderboardButton = document.getElementById('leaderboardButton');
        const leaderboardModal = document.getElementById('leaderboardModal');
        const closeLeaderboard = document.getElementById('closeLeaderboard');


        function updateUserStats(stats) {
        userInfo.innerHTML = `
            <div>当前用户: ${stats.username}</div>
        `;
    }

    // 更新排行榜显示
    leaderboardButton.addEventListener('click', async () => {
        try {
            const response = await fetch('/leaderboard');
            const data = await response.json();
            const leaderboardBody = document.getElementById('leaderboardBody');
            leaderboardBody.innerHTML = '';
            
            data.forEach((item, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${item.username}</td>
                    <td class="history-covert stat-count">${item.stats.covert}</td>
                    <td class="history-classified stat-count">${item.stats.classified}</td>
                    <td class="history-restricted stat-count">${item.stats.restricted}</td>
                    <td class="history-milspec stat-count">${item.stats.milspec}</td>
                    <td class="history-industrial stat-count">${item.stats.industrial}</td>
                    <td class="stat-count">${item.stats.total}</td>
                `;
                leaderboardBody.appendChild(row);
            });
            
            leaderboardModal.style.display = 'flex';
        } catch (error) {
            console.error('获取排行榜失败:', error);
        }
    });

    // 修改添加历史记录的函数
    async function addToHistory(item) {
        if (!currentUser) return;

        try {
            const response = await fetch('/addRecord', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    username: currentUser,
                    type: item.type
                })
            });
            
            const data = await response.json();
            if (data.success) {
                updateUserStats(data.stats);
                history[item.type].push(item);
                updateHistoryDisplay();
            }
        } catch (error) {
            console.error('保存记录失败:', error);
        }
    }

    // 登录成功后更新用户统计
    loginButton.addEventListener('click', async () => {
        const username = usernameInput.value.trim();
        if (username) {
            try {
                const response = await fetch('/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ username })
                });
                const data = await response.json();
                if (data.success) {
                    currentUser = username;
                    loginModal.style.display = 'none';
                    updateUserStats(data.stats);
                    loadHistory();
                }
            } catch (error) {
                console.error('登录失败:', error);
            }
        }
    });

        closeLeaderboard.addEventListener('click', () => {
            leaderboardModal.style.display = 'none';
        });

        // 修改添加历史记录的函数
        async function addToHistory(item) {
            if (!currentUser) return;

            try {
                await fetch('/addRecord', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        username: currentUser,
                        type: item.type,
                        imagePath: item.imagePath,
                        timestamp: new Date().toISOString()
                    })
                });
                
                history[item.type].push(item);
                updateHistoryDisplay();
            } catch (error) {
                console.error('保存记录失败:', error);
            }
        }

        // 修改加载历史记录的函数
        async function loadHistory() {
            if (!currentUser) return;

            try {
                const response = await fetch(`/history/${currentUser}`);
                const data = await response.json();
                history = {
                    covert: [],
                    classified: [],
                    restricted: [],
                    milspec: [],
                    industrial: []
                };
                
                data.forEach(record => {
                    history[record.type].push({
                        type: record.type,
                        imagePath: record.imagePath
                    });
                });
                
                updateHistoryDisplay();
            } catch (error) {
                console.error('加载历史记录失败:', error);
            }
        }
        // 关闭按钮点击事件
    document.getElementById('closeLeaderboard').addEventListener('click', () => {
        document.getElementById('leaderboardModal').style.display = 'none';
    });

    // ESC键关闭
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            document.getElementById('leaderboardModal').style.display = 'none';
        }
    });

    // 点击模态框外部关闭
    document.getElementById('leaderboardModal').addEventListener('click', (e) => {
        if (e.target === document.getElementById('leaderboardModal')) {
            document.getElementById('leaderboardModal').style.display = 'none';
        }
    });

    </script>
</body>
</html>